:- encoding(utf8).


solve_puzzle(Spartak, CSKA, Dynamo, Rotor) :-
    permutation([Spartak, CSKA, Dynamo, Rotor], [1,2,3,4]),
    
    
    % Иван: "Спартак будет чемпионом, а ЦСКА займет последнее место."
    % Верно ровно одно из утверждений.
    ( (Spartak =:= 1, CSKA =\= 4) ; (Spartak =\= 1, CSKA =:= 4) ),
    
    % Сергей: "Спартак выше третьего не поднимется, а ЦСКА станет вторым."
    % То есть, либо Спартак занимает 3-е или 4-е место, либо ЦСКА занимает 2-е место.
    ( (member(Spartak, [3,4]), CSKA =\= 2) ; (\+ member(Spartak, [3,4]), CSKA =:= 2) ),
    
    % Петр: "Чемпионом будет Динамо, а ЦСКА войдет в тройку сильнейших."
    % То есть, либо Динамо занимает 1-е место, либо ЦСКА занимает 1-е, 2-е или 3-е место.
    ( (Dynamo =:= 1, \+ member(CSKA, [1,2,3])) ; (Dynamo =\= 1, member(CSKA, [1,2,3])) ),
    
    % Алексей: "Динамо будет вторым, а Ротор точно будет последним."
    % То есть, либо Динамо занимает 2-е место, либо Ротор — 4-е.
    ( (Dynamo =:= 2, Rotor =\= 4) ; (Dynamo =\= 2, Rotor =:= 4) ).


main :-
    solve_puzzle(Spartak, CSKA, Dynamo, Rotor),
    nl,
    writeln('Итоговое распределение мест:'),
    format('1-е место (чемпион): Спартак (Место: ~w)~n', [Spartak]),
    format('2-е место: ЦСКА (Место: ~w)~n', [CSKA]),
    format('3-е место: Динамо (Место: ~w)~n', [Dynamo]),
    format('4-е место (последнее): Ротор (Место: ~w)~n', [Rotor]),
    nl,
    writeln('Найденное решение: Спартак = 1, ЦСКА = 2, Динамо = 3, Ротор = 4').